#!/usr/bin/env ruby

$:.unshift File.expand_path(File.dirname(__FILE__) + '/../lib')

require 'rubygems'
require 'rmagick'
require 'equi-cubic'

img = Magick::Image.read ARGV[0]
fn = File.basename(ARGV[0], '.*')
ext = File.extname(ARGV[0])
t = Transformer.new 
faces = t.transform img
{:FACE_X_POS => 'f',
    :FACE_X_NEG => 'b', 
    :FACE_Y_POS => 'r', 
    :FACE_Y_NEG => 'l', 
    :FACE_Z_POS => 'u',
    :FACE_Z_NEG => 'd'}.each do |f, n|
        faces[f].write "#{fn}_#{n}#{ext}"
    end