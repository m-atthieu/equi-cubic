#!/usr/bin/env ruby
# -*- mode: ruby -*-

$:.unshift File.expand_path(File.dirname(__FILE__) + '/../lib')

require 'rubygems'
require 'rmagick'
require 'equicubic'

ARGV.each do |filename|
  img = Magick::Image.read filename
  fn = File.basename filename, '.*'
  ext = File.extname filename
  bilinear = Interpolator.factory :bilinear, img
  bicubic = Interpolator.factory :bicubic, img
  none = Interpolator.factory :none, img
  t = Transformer.new
  t.set_interpolator bilinear
  faces = t.equi_cubic img
  { :FACE_X_POS => 'f',
    :FACE_X_NEG => 'b',
    :FACE_Y_POS => 'l',
    :FACE_Y_NEG => 'r',
    :FACE_Z_POS => 'u',
    :FACE_Z_NEG => 'd'}.each do |f, n|
    faces[f].write "#{fn}_#{n}#{ext}"
  end
end
